[gd_scene load_steps=17 format=4 uid="uid://cbtgusa4nk5fg"]

[ext_resource type="Texture2D" uid="uid://cxkyu2betuy2h" path="res://assets/iso_tileset.png" id="1_fk0uo"]
[ext_resource type="Script" uid="uid://b3owc7nynmmhr" path="res://scripts/tile_map_layer.gd" id="2_58t6w"]
[ext_resource type="Script" uid="uid://cluvo52yp3k1f" path="res://scripts/player_1.gd" id="2_vfr8r"]
[ext_resource type="Texture2D" uid="uid://dk8cy5t0xs3nx" path="res://player/player.png" id="3_58t6w"]
[ext_resource type="Script" uid="uid://bg7c610lua0wh" path="res://scripts/smooth_camera.gd" id="4_smooth"]
[ext_resource type="Script" uid="uid://cfy08vjqx65dh" path="res://scripts/player_recorder.gd" id="5_recorder"]
[ext_resource type="Script" uid="uid://bmnl7dtkpdrcq" path="res://scripts/countdown_timer.gd" id="6_timer"]
[ext_resource type="Script" uid="uid://yb6p1xs55nb5" path="res://scripts/moveable_polygon.gd" id="7_polygon"]
[ext_resource type="Script" uid="uid://de6ijmd1jc48j" path="res://scripts/npc_manager.gd" id="8_npc_manager"]

[sub_resource type="NavigationPolygon" id="NavigationPolygon_vfr8r"]
vertices = PackedVector2Array(16, 0, 0, 8, -16, 0, 0, -8)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3)])
outlines = Array[PackedVector2Array]([PackedVector2Array(0, -8, -16, 0, 0, 8, 16, 0)])
agent_radius = 0.0

[sub_resource type="NavigationPolygon" id="NavigationPolygon_58t6w"]
vertices = PackedVector2Array(16, 0, 0, 8, -16, 0, 0, -8)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3)])
outlines = Array[PackedVector2Array]([PackedVector2Array(0, -8, -16, 0, 0, 8, 16, 0)])
agent_radius = 0.0

[sub_resource type="NavigationPolygon" id="NavigationPolygon_olw03"]
vertices = PackedVector2Array(16, 0, 0, 8, -16, 0, 0, -8)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3)])
outlines = Array[PackedVector2Array]([PackedVector2Array(0, -8, -16, 0, 0, 8, 16, 0)])
agent_radius = 0.0

[sub_resource type="NavigationPolygon" id="NavigationPolygon_imdxm"]
vertices = PackedVector2Array(16, 0, 0, 8, -16, 0, 0, -8)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3)])
outlines = Array[PackedVector2Array]([PackedVector2Array(0, -8, -16, 0, 0, 8, 16, 0)])
agent_radius = 0.0

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_olw03"]
texture = ExtResource("1_fk0uo")
texture_region_size = Vector2i(32, 32)
0:0/0 = 0
0:0/0/texture_origin = Vector2i(0, -8)
0:0/0/navigation_layer_0/polygon = SubResource("NavigationPolygon_vfr8r")
1:0/0 = 0
1:0/0/texture_origin = Vector2i(0, -8)
1:0/0/navigation_layer_0/polygon = SubResource("NavigationPolygon_58t6w")
2:0/0 = 0
2:0/0/texture_origin = Vector2i(0, -8)
2:0/0/navigation_layer_0/polygon = SubResource("NavigationPolygon_olw03")
3:0/0 = 0
3:0/0/texture_origin = Vector2i(0, -8)
4:0/0 = 0
4:0/0/texture_origin = Vector2i(0, -8)
5:0/0 = 0
5:0/0/texture_origin = Vector2i(0, -8)
5:0/0/navigation_layer_0/polygon = SubResource("NavigationPolygon_imdxm")
6:0/0 = 0
6:0/0/texture_origin = Vector2i(0, -8)
6:0/0/z_index = 1
0:1/0 = 0
0:1/0/texture_origin = Vector2i(0, -8)
0:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-0.8258667, -7.5870667, -16, 0, 0, 8, 15.031103, 0.48444843)

[sub_resource type="TileSet" id="TileSet_imdxm"]
tile_shape = 1
tile_layout = 5
tile_offset_axis = 1
tile_size = Vector2i(32, 16)
physics_layer_0/collision_layer = 1
navigation_layer_0/layers = 1
sources/0 = SubResource("TileSetAtlasSource_olw03")

[sub_resource type="CircleShape2D" id="CircleShape2D_21gni"]
radius = 1.0

[node name="Node2D" type="Node2D"]

[node name="EmptyFloor" type="TileMapLayer" parent="."]
visible = false
z_index = 1
tile_set = SubResource("TileSet_imdxm")

[node name="GroundFloor" type="TileMapLayer" parent="."]
tile_map_data = PackedByteArray("AAABAAIAAAABAAAAAAACAAIAAAABAAAAAAADAAIAAAABAAAAAAAEAAIAAAABAAAAAAAFAAIAAAABAAAAAAAEAAEAAAABAAAAAAAFAAEAAAABAAAAAAAFAAAAAAABAAAAAAAEAAAAAAABAAAAAAABAAMAAAABAAAAAAACAAMAAAABAAAAAAADAAMAAAABAAAAAAAEAAMAAAABAAAAAAAFAAMAAAABAAAAAAAGAAMAAAABAAAAAAAGAAIAAAABAAAAAAAHAAIAAAABAAAAAAAGAAEAAAABAAAAAAAGAAAAAAABAAAAAAAHAAAAAAABAAAAAAAHAAEAAAABAAAAAAAHAAMAAAABAAAAAAABAAQAAAABAAAAAAACAAQAAAABAAAAAAADAAQAAAABAAAAAAAEAAQAAAABAAAAAAAFAAQAAAABAAAAAAAGAAQAAAABAAAAAAAHAAQAAAABAAAAAAAIAAQAAAABAAAAAAAJAAQAAAABAAAAAAAJAAMAAAABAAAAAAAJAAIAAAABAAAAAAAJAAEAAAABAAAAAAAIAAEAAAABAAAAAAAIAAIAAAABAAAAAAAIAAMAAAABAAAAAAAFAP//AAABAAAAAAAFAP7/AAABAAAAAAAFAP3/AAABAAAAAAAGAP7/AAABAAAAAAAGAP//AAABAAAAAAAHAP//AAABAAAAAAAIAP//AAABAAAAAAAIAAAAAAABAAAAAAAJAAAAAAABAAAAAAAIAP7/AAABAAAAAAAHAP7/AAABAAAAAAAGAP3/AAABAAAAAAAHAP3/AAABAAAAAAAIAP3/AAABAAAAAAAFAPz/AAAAAAAAAAAFAPv/AAAAAAAAAAAGAPv/AAAAAAAAAAAGAPz/AAAAAAAAAAAHAPz/AAAAAAAAAAAIAPz/AAAAAAAAAAAHAPv/AAAAAAAAAAAHAPr/AAAAAAAAAAAIAPv/AAAAAAAAAAAGAPr/AAAAAAAAAAAFAPr/AAAAAAAAAAAEAPr/AAAAAAAAAAAEAPv/AAAAAAAAAAAEAPz/AAAAAAAAAAD/////AAAAAAAAAAD//wEAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAQAAAAAAAAAAAD//wQAAAAAAAAAAAD//wMAAAAAAAAAAAD//wIAAAAAAAAAAAD+/wEAAAAAAAAAAAD+/wAAAAAAAAAAAAD+////AAAAAAAAAAD+//7/AAAAAAAAAAD+//3/AAAAAAAAAAD///3/AAAAAAAAAAADAPr/AAAAAAAAAAACAPr/AAAAAAAAAAABAPr/AAAAAAAAAAAAAPr/AAAAAAAAAAD///r/AAAAAAAAAAD+//r/AAAAAAAAAAD+//v/AAAAAAAAAAD+//z/AAAAAAAAAAADAPz/AAAAAAAAAAACAPz/AAAAAAAAAAABAPz/AAAAAAAAAAAAAPz/AAAAAAAAAAAAAPv/AAAAAAAAAAABAPv/AAAAAAAAAAACAPv/AAAAAAAAAAADAPv/AAAAAAAAAAD///v/AAAAAAAAAAD///z/AAAAAAAAAAD///7/AAAAAAAAAAD+/wIAAAAAAAAAAAD+/wMAAAAAAAAAAAD+/wQAAAAAAAAAAAAIAPr/AAAAAAAAAAD//wAAAAAAAAAAAAAJAPz/AAAAAAAAAAAJAP3/AAAAAAAAAAAJAP7/AAAAAAAAAAAKAP7/AAACAAAAAAAKAP//AAAAAAAAAAAJAP//AAAAAAAAAAAKAAAAAAAAAAAAAAAKAAEAAAAAAAAAAAALAAEAAAAAAAAAAAAMAAQAAAAAAAAAAAALAAQAAAAAAAAAAAALAAUAAAAAAAAAAAAKAAQAAAAAAAAAAAALAAYAAAAAAAAAAAAKAAYAAAAAAAAAAAAKAAUAAAAAAAAAAAAMAAYAAAAAAAAAAAANAAYAAAAAAAAAAAANAAUAAAAAAAAAAAANAAQAAAAAAAAAAAANAAEAAAAAAAAAAAAMAAEAAAAAAAAAAAAMAAAAAAAAAAAAAAALAAAAAAAAAAAAAAAMAAUAAAACAAAAAAALAP//AAACAAAAAAALAP7/AAACAAAAAAAKAP3/AAACAAAAAAAKAPz/AAACAAAAAAAJAPv/AAACAAAAAAAJAPr/AAACAAAAAAAKAPr/AAACAAAAAAAKAPv/AAACAAAAAAALAPv/AAACAAAAAAALAPz/AAACAAAAAAAMAPz/AAACAAAAAAAMAP3/AAACAAAAAAAMAP7/AAACAAAAAAANAP7/AAACAAAAAAANAP//AAACAAAAAAANAAAAAAAAAAAAAAAOAP//AAACAAAAAAAOAP7/AAACAAAAAAANAP3/AAACAAAAAAAMAP//AAACAAAAAAALAP3/AAACAAAAAAAOAAAAAAAAAAAAAAAOAP3/AAACAAAAAAAOAPz/AAACAAAAAAAOAPv/AAACAAAAAAANAPr/AAACAAAAAAAOAPr/AAACAAAAAAANAPv/AAACAAAAAAANAPz/AAACAAAAAAAMAPv/AAACAAAAAAAMAPr/AAACAAAAAAALAPr/AAACAAAAAAAOAAEAAAAAAAAAAAAPAAMAAAAEAAAAAAAPAAQAAAAEAAAAAAAOAAQAAAAAAAAAAAAQAAMAAAAEAAAAAAAQAAIAAAAEAAAAAAAPAAIAAAAEAAAAAAAPAAEAAAAEAAAAAAAPAAAAAAAEAAAAAAAPAP//AAAEAAAAAAAPAP7/AAACAAAAAAAQAP//AAAEAAAAAAARAP//AAAEAAAAAAAQAAAAAAAEAAAAAAAQAAEAAAAEAAAAAAAOAAUAAAAAAAAAAAAOAAYAAAAAAAAAAAAPAAYAAAAEAAAAAAAQAAYAAAAEAAAAAAAPAAUAAAAEAAAAAAARAAYAAAAEAAAAAAASAAYAAAAEAAAAAAASAAUAAAAEAAAAAAARAAUAAAAEAAAAAAAQAAUAAAAEAAAAAAATAAUAAAAEAAAAAAATAAYAAAAEAAAAAAAUAAYAAAAEAAAAAAAVAAYAAAAEAAAAAAAWAAYAAAAEAAAAAAAVAAUAAAAEAAAAAAAUAAUAAAAEAAAAAAAVAAQAAAAEAAAAAAAWAAQAAAAEAAAAAAAWAAUAAAAEAAAAAAAWAAMAAAAEAAAAAAAVAAMAAAAEAAAAAAAVAAIAAAAEAAAAAAAWAAIAAAAEAAAAAAAWAAEAAAAEAAAAAAAWAAAAAAAEAAAAAAAVAAAAAAAEAAAAAAAVAP//AAAEAAAAAAAVAAEAAAAEAAAAAAAWAP//AAAEAAAAAAAWAP7/AAAEAAAAAAAVAP7/AAAEAAAAAAAVAP3/AAAEAAAAAAAWAP3/AAAEAAAAAAAWAPz/AAAEAAAAAAAVAPz/AAAEAAAAAAAVAPv/AAAEAAAAAAAWAPv/AAAEAAAAAAAUAPv/AAAEAAAAAAASAPv/AAAEAAAAAAATAPv/AAAEAAAAAAASAPr/AAAEAAAAAAATAPr/AAAEAAAAAAAUAPr/AAAEAAAAAAAVAPr/AAAEAAAAAAAWAPr/AAAEAAAAAAAPAP3/AAACAAAAAAAPAPz/AAACAAAAAAAPAPv/AAAEAAAAAAAPAPr/AAAEAAAAAAAQAPr/AAAEAAAAAAARAPr/AAAEAAAAAAARAPv/AAAEAAAAAAAQAPv/AAAEAAAAAAAQAP7/AAAEAAAAAAAQAP3/AAAEAAAAAAAQAPz/AAAEAAAAAAARAAAAAAAEAAAAAAASAAAAAAAEAAAAAAATAAAAAAAEAAAAAAAUAAAAAAAEAAAAAAASAP//AAAEAAAAAAATAP//AAAEAAAAAAAUAP//AAAEAAAAAAAJAAYAAAABAAAAAAAIAAUAAAABAAAAAAAJAAUAAAABAAAAAAAIAAYAAAABAAAAAAACAAUAAAABAAAAAAABAAUAAAABAAAAAAACAAYAAAABAAAAAAABAAYAAAABAAAAAAABAAcAAAABAAAAAAABAAgAAAABAAAAAAACAAgAAAABAAAAAAACAAkAAAABAAAAAAADAAkAAAABAAAAAAAEAAkAAAABAAAAAAAFAAkAAAABAAAAAAAGAAkAAAABAAAAAAAHAAkAAAABAAAAAAAHAAoAAAABAAAAAAAGAAoAAAABAAAAAAAFAAoAAAABAAAAAAABAAkAAAABAAAAAAACAAoAAAABAAAAAAABAAoAAAABAAAAAAADAAoAAAABAAAAAAAEAAoAAAABAAAAAAAIAAoAAAABAAAAAAAJAAoAAAABAAAAAAAJAAkAAAABAAAAAAAIAAkAAAABAAAAAAAIAAgAAAABAAAAAAAIAAcAAAABAAAAAAAJAAcAAAABAAAAAAAJAAgAAAABAAAAAAACAAcAAAABAAAAAAA=")
tile_set = SubResource("TileSet_imdxm")
script = ExtResource("2_58t6w")

[node name="MoveablePolygon" type="CharacterBody2D" parent="GroundFloor" groups=["moveable"]]
position = Vector2(100, 50)
script = ExtResource("7_polygon")

[node name="Polygon2D" type="Polygon2D" parent="GroundFloor/MoveablePolygon"]
color = Color(0.23473272, 0.2664721, 0.18236038, 0.8)
polygon = PackedVector2Array(-4, -9, -17, -2, -3, 5, 10, -2)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="GroundFloor/MoveablePolygon"]
position = Vector2(-22, 14.635662)
scale = Vector2(1.9166666, 2.2095587)
polygon = PackedVector2Array(9.913044, -10.697008, 2.608696, -7.5289536, 9.391304, -4.360901, 16.695656, -7.5289536)

[node name="CharacterBody2D" type="CharacterBody2D" parent="GroundFloor" groups=["player"]]
z_index = 1
position = Vector2(33, 63)
script = ExtResource("2_vfr8r")

[node name="CollisionShape2D" type="CollisionShape2D" parent="GroundFloor/CharacterBody2D"]
position = Vector2(-1, 2)
shape = SubResource("CircleShape2D_21gni")

[node name="highlight" type="Polygon2D" parent="GroundFloor/CharacterBody2D"]
visible = false
position = Vector2(-16, -2)
color = Color(1, 1, 1, 0.5058824)
polygon = PackedVector2Array(0, -8, -15, 0, 0, 7, 14, 0)

[node name="Sprite2D" type="Sprite2D" parent="GroundFloor/CharacterBody2D"]
texture_filter = 1
position = Vector2(-1, 0)
texture = ExtResource("3_58t6w")

[node name="NavigationAgent2D" type="NavigationAgent2D" parent="GroundFloor/CharacterBody2D"]
path_desired_distance = 5.0
target_desired_distance = 5.0
path_postprocessing = 1
debug_enabled = true
debug_use_custom = true

[node name="PlayerRecorder" type="Node" parent="GroundFloor/CharacterBody2D"]
script = ExtResource("5_recorder")

[node name="FirstFloor" type="TileMapLayer" parent="."]
z_index = 1
tile_map_data = PackedByteArray("AAAAAAAAAAAEAAAAAAABAAAAAAAEAAAAAAACAP//AAAEAAAAAAABAP//AAAEAAAAAAAAAP//AAAEAAAAAAACAAAAAAAEAAAAAAA=")
tile_set = SubResource("TileSet_imdxm")
script = ExtResource("2_58t6w")

[node name="NPCManager" type="Node2D" parent="."]
script = ExtResource("8_npc_manager")

[node name="SecondFloor" type="TileMapLayer" parent="."]
z_index = 2
tile_map_data = PackedByteArray("AAD+//3/AAAFAAAAAAD9//3/AAAFAAAAAAD9//7/AAAFAAAAAAAAAPz/AAAFAAAAAAAAAPr/AAAFAAAAAAD///r/AAAFAAAAAAD+//r/AAAFAAAAAAD9//v/AAAFAAAAAAD9//z/AAAFAAAAAAD9//r/AAAFAAAAAAAAAPv/AAAFAAAAAAAAAP3/AAAFAAAAAAD///3/AAAFAAAAAAD+//7/AAAFAAAAAAA=")
tile_set = SubResource("TileSet_imdxm")
script = ExtResource("2_58t6w")

[node name="SmoothCamera" type="Camera2D" parent="."]
position = Vector2(-32, 17)
zoom = Vector2(4, 4)
script = ExtResource("4_smooth")
target_offset = Vector2(0, -10)

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="MarginContainer" type="MarginContainer" parent="CanvasLayer"]
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -200.0
offset_bottom = 60.0
grow_horizontal = 0
theme_override_constants/margin_top = 10
theme_override_constants/margin_right = 20

[node name="CountdownTimer" type="Label" parent="CanvasLayer/MarginContainer"]
layout_mode = 2
text = "01:00.00"
script = ExtResource("6_timer")
